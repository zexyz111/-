<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<title>CloudFlow â€” SoundCloud Web Player</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700&display=swap" rel="stylesheet">

<script src="https://w.soundcloud.com/player/api.js"></script>

<style>

/* ================= UI ================= */

body{
margin:0;
font-family:Inter;
background:#050510;
color:white;
overflow-x:hidden;
}

header{
padding:20px 40px;
font-size:22px;
font-weight:700;
background:rgba(255,255,255,.05);
backdrop-filter:blur(20px);
position:sticky;
top:0;
}

.container{
max-width:1100px;
margin:auto;
padding:40px;
}

.search{
width:100%;
padding:18px;
border-radius:14px;
border:none;
background:#111;
color:white;
font-size:18px;
outline:none;
}

.results{
margin-top:30px;
display:grid;
gap:15px;
}

.track{
padding:20px;
border-radius:16px;
background:rgba(255,255,255,.05);
cursor:pointer;
transition:.3s;
}

.track:hover{
transform:translateY(-4px);
background:rgba(255,255,255,.08);
}

.player{
position:fixed;
bottom:0;
left:0;
width:100%;
height:140px;
background:#000;
border-top:1px solid #222;
}

iframe{
width:100%;
height:100%;
border:none;
}

.title{
font-weight:600;
}

.artist{
opacity:.6;
font-size:14px;
}

</style>
</head>

<body>

<header>ðŸŽ§ CloudFlow Player</header>

<div class="container">

<input
class="search"
placeholder="Search SoundCloud tracks..."
onkeydown="if(event.key==='Enter') searchTracks(this.value)"
>

<div class="results" id="results"></div>

</div>

<div class="player">
<iframe id="scPlayer"></iframe>
</div>

<script>

/* =========================
   SEARCH VIA OEMBED
   (GitHub Pages friendly)
========================= */

async function searchTracks(query){

const results=document.getElementById("results");
results.innerHTML="Searching...";

const res=await fetch(
`https://api.allorigins.win/raw?url=${
encodeURIComponent(
`https://soundcloud.com/search?q=${query}`
)}`
);

const html=await res.text();

/* Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ðµ Ð¸Ð·Ð²Ð»ÐµÑ‡ÐµÐ½Ð¸Ðµ ÑÑÑ‹Ð»Ð¾Ðº */
const links=[...html.matchAll(/href="(\/[^"]+)"/g)]
.map(m=>"https://soundcloud.com"+m[1])
.filter(l=>l.includes("/tracks")||l.split("/").length>4)
.slice(0,8);

results.innerHTML="";

links.forEach(link=>{
const div=document.createElement("div");
div.className="track";
div.innerHTML=`
<div class="title">${link.split("/").pop()}</div>
<div class="artist">${link}</div>
`;
div.onclick=()=>playTrack(link);
results.appendChild(div);
});

}

/* =========================
   PLAY TRACK
========================= */

function playTrack(url){

const player=document.getElementById("scPlayer");

player.src=
`https://w.soundcloud.com/player/?url=${encodeURIComponent(url)}
&auto_play=true
&visual=true
&color=%237c7cff`;

}

</script>

</body>
</html>
